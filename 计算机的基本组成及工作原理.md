# 一、计算机的基本组成及工作原理

计算机硬件的基本组成包括运算器、控制器、存储器、输入设备、输出设备五大部件组成。其中，运算器和控制器被集成到了一起称为CPU。

运算器(Arithmetic and Logic Unit, ALU)是对数据进行加工处理的部件，能够完成算术运算和逻辑运算，称为算术逻辑单元

控制器主要是从主存种取出指令并进行分析，以控制计算机各个部件有条不紊的完成指令的功能

存储器主要分为内存和外存，为了提高整个系统的运行速度，计算机种往往设有寄存器、高速缓存等存储器

输入/输出设备是计算机系统与外界交换信息的部件，一般通过总线和接口将主机与I/O设备组合在一起。

## 1.1 总线的基本概念
总线是连接多个设备的信息传送通道，也就是一组信号线；任何连接两个以上电子元器件的导线都可以称为总线。

### 1.1.1 总线的分类
1.  **芯片内总线** 。芯片内各个部件的连接
2.  **元件级总线** 。用于一块电路板内各元件的连接
3.  **系统总线** ，又称内总线。用于计算机各个组成部分的连接(连接CPU 内存等)
4.  **外总线** ，又称通信总线。用于计算机与外设或计算机与计算机之间的连接通信

#### 1.1.2 系统总线

**系统总线** (System Bus)是微机系统中重要的总线，对计算机的运行的性能由总要影响。CPU通过系统总线对存储器内容进行读写；同样通过系统总线，实现将CPU内数据写入外设，或由外设读入CPU。按照信息传递功能分为 **地址总线、数据总线、控制总线** 。

系统总线的性能主要有 **带宽、位宽和工作频率** 

* 带宽：指单位时间内总线上传送的数据量(每秒钟传送得最大稳态数据传输率)
* 位宽：指总线能同时传送的二进制数据，或数据总线的位数
* 工作频率：是指数据传输的频率，以 MHz 为单位

它们之间的关系：$总线的带宽=总线的工作频率\times \frac{总线的位宽}{8}$

常见的传统系统总线有ISA、EISA、PCI/AGP等。

1. ISA总线(工业标准总线)

    与PC总线兼容，在原有的PC总线的62个插座信号的基础上扩充了36个信号插座。
    * 24条地址线
    * 16条数据线
    * 控制总线
        * 内存读写
        * 接口读写
        * 中断请求
        * 中断响应
        * DMA请求和响应
    * $\pm5V、\pm12V$电源和地线

2. EISA总线
    
    它是在ISA总线上发展起来的32位总线，该总线定义了 **32位地址线** 、 **32位数据线** 以及其他控制信号线、电源线、地线等 **196个接点** 。总线传输 **速率可达$33Mb/s$** 。EISA总线利用总线插座与ISA总线兼容，插板插在上层为ISA总线信号；插板插在下层为EISA总线

3. PCI总线
    
    目前微机上广泛采用的内总线。有两种标准
    * 适用于32位机的124个信号的标准, 传输速率至少为$133Mb/s$
    * 适用于64位机的188个信号的标准, 传输速率至少为$266Mb/s$

    **与处理器的工作相互独立** ，也就是，PCI总线时钟与处理器时钟独立、非同步。 **PCI总线设备时即插即用。** 目前PCI总线遇到了并行总线的技术难题
    
4. AGP总线

    图像加速端口。Intel公司推出的图形显示卡专用局部总线
    * **直接与主板的北桥芯片相连** ，从而让显卡芯片与主存直接相连，避免了窄带宽的PCI总线形成系统瓶颈，增加3D图形数据传输速度， **显卡内存不足时还可以调用主存** 。
    * AGP标准工作在32位总线时由$66MHz$和$133MHz$两种工作频率，最高传输速率$266Mb/s$ 和 $533Mb/s$

5. PCI-E总线(PCI Express)

    采用 **点对点串行连接** ，每个 **设备都有自己的专用连接** ，不需要向整个总线请求带宽。PCI-E X1和PCI-X16是目前主流规格；PCI-E总线支持 **高阶电源管理，支持热插拔，数据同步传输，为优先传输数据进行带宽优化** 
     
### 1.1.3 外总线
外总线标准由很多，主流的由如下几种
1. RS-232C。串行外总线

    * 传输线少，最少3根(一条发送数据，一条接收数据，一条地线)及可实现全双工通信
    * 传输距离远
    * 具有较好的抗干扰性
2. RS-485。平衡发送、差分接受
    
    * 抑制共模干扰
    * 通信距离远
3. SCSI。小型计算机系统接口，是一种并行外总线
    
    * 广泛用于软硬磁盘、光盘和扫描仪
    * 早期是 8 位，后来扩展到了16位、32位
    * Ultra320 SCSI 单通道可达$320Mb/s$；双通道可达$640Mb/s$
4. USB。通用串行总线
    
    目前广泛应用，USB接口已经成为计算机硬件系统的基本配置。
    * USB 1.0有两种传输速率：低速，$1.5Mb/s$;高速，$12Mb/s$
    * USB 2.0传输速率为$480Mb/s$
    * USB支持 **即插即用** 并 **支持热插拔** 
5. IEEE-1394.串行数据传输协议

    支持 **即插即用** 并 **支持热插拔** 
    * 比USB相比速率更快、用于音频、视频等数据传输
    * IEEE-1394理论可以连接64台设备
    * 传输速率有$100Mb/s、400Mb/s、800Mb/s、1600Mb/s、3.2Gb/s$

## 1.2 中央处理单元
CPU是Central Process Unit，简称微处理器。是计算机工作的核心部件，用于控制并协调各个部件
### 1.2.1 CPU的功能
1. **指令控制** 。执行指令控制程序执行顺序( **重要职能** )
2. 操作控制。一条指令功能实现需要若干操作信号完成，CPU产生每条指令的操作信号并传送到不同的部件，控制部件按指令功能完成操作
3. 时序控制。CPU通过时序电路产生时钟信号进行定时，控制各种操作按指定的时序进行
4. **数据处理** 。在CPU的控制下完成对数据加工处理( **最根本的任务** )

### 1.2.2  CPU的组成
CPU主要由运算器、控制器、寄存器组和内部总线组成。

![](https://images.gitee.com/uploads/images/2021/0109/194750_27062ac6_7841459.png "屏幕截图.png")

1. 运算器

    运算器(简称ALU)主要完成 **算术运算和逻辑运算** , 实现对数据的加工处理。计算机的运算器结构不同，基本都包括 **算术运算和逻辑运算单元** 、 **累加器(AC)** 、 **状态字寄存器(PSW)** 、 **寄存器组** 及多路转换器等。
    * 寄存器组的作用是 **暂存操作数或数据地址** 
    * 标志寄存器也称状态字寄存器，用于 **存放算术、逻辑运算过程中产生的状态信息** 
    * 累加器，用于 **暂存运算结果或向ALU提供运算对象** 
2. 控制器
    
    主要功能是 **从内存中取出指令，并指出下一条指令在内存中的位置** ，将取出的指令送入到 **指令寄存器** ，启动 **指令译码器** 对指令进行分析，最后发出响应的控制信号和定时信息，控制和协调计算机各个部件的工作，完成指令规定的操作。
    
    控制器由 **程序计数器(PC)** 、 **指令寄存器(IR)** 、 **指令译码器** 、 **状态字寄存器(PSW)** 、 **时序产生器** 和 **微操作信号发生器** 组成
![](https://images.gitee.com/uploads/images/2021/0109/195848_dfdd041c_7841459.png "屏幕截图.png")
* 程序计数器(PC): 当程序顺序执行时，每取出一条指令，PC内容自动增加指向下一条要待取指令。当程序出现转移时，则将转移地址送人PC，然后由PC指出新的指令地址

* 指令寄存器：存放正在执行的指令

* 指令译码器：对现行 **指令分析** ，确定指令类型和指令要完成的操作及寻址方式

* 时序部件：用于 **产生时序脉冲和节拍电位** 以控制计算机各部件有序工作

* 状态字寄存器(PSW): 用于 **保存指令执行完成后产生的条件码** ，例如运算结果是否溢出，结果为正还是为负，是否由进位等。PSW还 **保存中断和系统工作状态**

* 微操作信号发生器：根据指令提供的操作信号、时序产生器提供的时序信号，以及各功能部件反馈的状态信信号等综合特定的操作序列，从而完成 **对指令的执行控制** 

控制器的作用控制整个计算机各个部件工作， **基本功能是从内存中取指令和执行指令** 

 **执行指令的步骤** 
* 取指令。先从程序计数器所指出的指令地址从内存中取出一条指令
* 指令译码。将指令的操作码部分送入指令译码器进行分析，然后根据指令的功能向有关部件发送控制命令
* 按指令操作码执行。根据指令译码器产生的操作控制命令以及程序状态字寄存器的状态， **控制微操作形成部件产生一系列CPU内部控制信号和输出到CPU外部的控制信号** 。在控制信号的控制下，实现指令的具体功能。
* 形成下一条指令地址。若非转移类指令，则修改程序计数器的内容；若为转义类型指令，则根据转移条件修改程序计数器的内容


3. 寄存器组

    寄存器是CPU内部的临时存储单元。可以用来存放数据和地址，也可以存放控制信号或CPU工作是的状态。**增加CPU寄存器数量可以减少CPU访问内存的次数，提高运行速率**。但是，寄存器增加也会导致寄存器地址编码增加从而增加指令长度。
    
    CPU 中的寄存器分为数据寄存器、地址寄存器、控制信号寄存器、状态信息寄存器和其他类型寄存器
    *  **累加器(Accumulator)** ：累加器是数据寄存器， **暂存操作数和中间运算结果** ，不能用于长时间保存数据

    *  **通用寄存器组** ： **暂存操作数或地址** ，使用它可以减少CPU访问内存的次数，提高运行速率

    * **标志寄存器(状态寄存器)** ：记录运算中产生的标志信息。每一位单独使用，称为标志位。反映了ALU的工作状态
        *  **进位标志位(C)** : 最高位产生进位时，该位置为 1
        *  **零标志位(Z)** : 运算结果为零时置为 1
        *  **符号标志位(S)** : 运算结果为负时置为 1
        *  **溢出标志位(V)** : 运算结果溢出时置为 1
        * ** 奇偶标志位(P)** : 运算结果中 1 的个数为偶数时置为 1

    *  **指令寄存器** ： **存放正在执行的指令** ，指令从内存中取出送入指令寄存器。指令的操作码被指令译码器送入微操作信号发生器，地址码指明参与运算的操作数的地址形成方式。 **指令执行过程中，指令寄存器中的内容不变** 

    * **数据缓冲寄存器(MDR)** 暂时存放由内存读出的一条指令或一个数据字；反之，向内存存入一个数据字，也暂时存放在数据缓冲寄存器中。

    *  **地址寄存器(MRA)** : 保存当前CPU访问的内存单元的地址。由于内存和CPU之间存在操作速度的差别，所以使用地址寄存器来保持地址信息，直到内存读写操作完成
    
    * 其他寄存器：根据CPU的结构特点还存在如堆栈指示器、变址寄存器和段地址寄存器

4. CPU内部总线：CPU内部总线将运算器、控制器、寄存器等连接在一起。
 
### 1.2.3 双核和多核处理器
半导体工工艺的每一次进步都为微处理器开辟了新的领域；体系结构的进展又在半导体工艺技术发展的基础上进一步提高了微处理器的性能。

CPU中最核心的组成部分称为内核或核心(Die), CPU的所有计算、接受/存储指令、数据处理都由核心执行。

双核处理器是在一个处理器上集成两个运算核心，从而提高计算能力。处理器的性能是处理器在每个时钟周期能够处理的指令总数，增加一个内核，处理器每个时钟周期可以执行的指令数翻倍。

多核芯片，在一个处理器中集成两个或多个内核，采用分治策略，通过划分任务，线程应用能够充分利用多个执行内核，并在特定时间内执行更多的任务。

## 1.3 存储系统
### 1.3.1 存储器分类
1. 按存储器所在位置分为**内存和外存**
2. 按构成存储器的材料分为**磁介质存储器、半导体存储器和光存储器**
3. 按工作方式分为**读写存储器和只读存储器**
    * 读写存储器(Random Access Memory, RAM)，既可以读数据也可以写入数据，但是断电信息丢失
    * 只读存储器，断电后存储的信息不丢失，按数据写入方式分为ROM、PROM、EPROM、EEPROM等类型
        * ROM，即固定只读存储器，厂家生产时写入的数据，不能改变，一般用于存放BIOS(标准输入输出系统)和用于微程序控制。
        * PROM，即可编程的只读存储器，内容由用户一次性写入，写入后不能修改
        * EPROM，即可擦除可编程只读存储，由用户写入，写入后可以修改。使用紫外线照射15~20分钟擦除数据，再用特殊的电子设备写入数据
        * EEPROM，电擦除的可编程只读存储
        * Flash MEMORY，闪存，可以使用电信号擦除数据，熟读远高于EPROM
4. 按访问方式分为**地址访问和内容访问存储器**
5. 按寻址方式分为随机存储器、顺序存储器和直接存储器。
    * 随机存储器(RAM), 对于任何写入和读取的数据， **访问任何一个存储单元所需要的时间相同** 
    * 顺序存储器(SAM), 访问数据需要的时间与数据存放位置有关，磁带就是典型的顺序存储器
    * 直接存储器(DAM), 介于随机和顺序存储器之间的寻址方式。例如；磁盘，磁道寻址随机，磁道内顺序寻址

### 1.3.2 存储系统的层次结构
![](https://images.gitee.com/uploads/images/2021/0110/123006_ea883383_7841459.png "屏幕截图.png")

上图所示的存储结构为三层结构；其中存储器运行速度由高到底排序为：高速缓存、主存、辅助外存。

也可以即将其视为四层结构，也就是将CPU中的寄存器视为存储器的一层，寄存器运行速度是最快的。

* 高速缓存可以提高计算机的工作效率，但是不是必须的部件

### 1.3.3 主存储器
主存储器简称主存、内存，用来存放机器当前运行需要的程序和数据，以便于向CPU提供信息。相对于外存，内存容量小速度快

主存一般 **由RAM或ROM两种工作方式的存储器构成** ，其中RAM占绝大部分存储空间。计算机系统常用的SDRAM(同步动态随机存储器)发展了四代
* 第一代SDR SDRAM
* 第二代DDR SDRAM(双倍速率SDRAM)
* 第三代DDR2 SDRAM(更高工作频率)
* 第四代DDR3 SDRAM(更低工作电压)

**主存的构成**

主存由存储体、控制线路、地址寄存器、数据寄存器和地址译码电路等部分组成
![](https://images.gitee.com/uploads/images/2021/0110/130658_082dd98f_7841459.png "屏幕截图.png")
* 地址寄存器。存放地址总线提供的将要访问的存储但与地址码。地址寄存器的位数N决定了其可访问的存储单元个数M, $M=2^N$
* 数据寄存器。用来存放要写入存储体的数据或从存储体中读取的数据
* 存储体。存放程序和数据
* 移码电路。根据地址寄存器中的地址吗，在存储体中找到相应的存储单元
* 控制线路。根据读写命令，控制主存储器各个部件完成相应操作

**主存的操作**
* 读
    1. CPU将待读取的存储单元地址送入地址寄存器
    2. 经过地址译码线路分析后选中主存的对应存储单元
    3. 在控制线路的作用下，将被选中的存储单元的内容读取到数据寄存器中

* 写
    1. CPU将要写入的存储单元地址送入地址寄存器
    2. 经过地址译码线路分析后选中主存的对应存储单元
    3. 在控制线路的作用下，将数据寄存器中的内容写入存储单元中。
 
**主存的性能指标**
1. 内存容量。常以字节表示，目前常见的计算机内存有$512MB、1GB、2GB$等，常见容量单位为$bit, Byte, KB, MB, GB, TB$等，具体关系如下
    
    |单位|解释|
    |:---:|:---:|
    |$1bit$|一个二进制位，即 0 或 1|
    |$1Byte$|8个二进制位，称为字节|
    |$1KB$|$1KB=1024Byte$，称为千字节|
    |$1MB$|$1MB=1024KB$, 称为兆字节|
    |$1GB$|$1GB=1024MB$|
    |$1TB$|$1TB=1024GB$|
    |$1PB$|$1PB=1024TB$|
    |$1EB$|$1EB=1024PB$|

2. 存储时间。从接到读写指令开始，到读写操作完成为止需要的时间；分为取数时间和存取周期。
    * 取数时间：指存储器从接收到读取指令到数据被稳定读取在数据寄存器的输出端为止时间
    * 存取周期： **两次独立的存或取操作之间需要的最短时间** 。半导体存储器的存取周期为60~100ns, 指连续两次访问存储器的最小时间间隔

3. 带宽。存储器的数据传输速率，即 **每秒传送的数据位数** ，记为$B_m$. 假设存储器传送数据宽度为$W$位(一个存储周期中读取或写入的位数)，则$B_m=\frac{W}{T_m}(b/s)$

4. 可靠性。存储器的可靠性用 **平均故障间隔时间MTFB衡量** ，也即是两次故障之间的平均时间间隔。 **MTFB越大可靠性越高，即保持正确工作能力强。** 

### 1.3.4 高速缓存
高速缓存(Cache)用于对主存中即将使用的数据进行临时复制。由于CPU的速度和性能提高和程序执行的局部性特点(在某个时间段，整个程序只执行程序的某个部分；执行访问的存储空间也局限于某个区域。)表现为 **时间局部性和空间局部性**。
* 时间局部性：程序的指令一旦执行，不久后该指令还有可能执行；如果数据被访问，不久后该条数据可能再次被访问
* 空间局部性：一旦程序访问了谋个存储空间，不久后可能再次访问该存储空间

因此，将速度比较快而且容量有限的静态存储器芯片构成Cache,以尽可能的发挥CPU的高速度，并且用硬件来实现Cache的全部功能

**Cache的特点** 
1. Cache位于CPU和主存之间，容量小，一般在几千字节到几兆字节之间
2. 速度一般比主存快5~10倍，有快速半导体制成
3. 内容为主存的副本(频繁使用RAM位置的内容以及这些数据项的存储地址)。对于程序员而言是透明的

**Cache的组成**

由控制部分和存储部分；

控制部分的功能为判断CPU访问的数据是否在Cache中；若在(命中)，则在Cache中寻址；若不在(没有命中)，则在主存中读取数据，并写入到Cache中(读取操作)；直接写入到主存(写入操作)

### 1.3.5 外存储器
用来暂时存放不用的程序和数据，信息以文件的形式存储。外存比内存的存储容量大，速度慢。CPU不能直接访问外存中的程序和数据。只有将其以文件的形式以文件的单位复制到主存才可以访问。
1. 磁盘存储器
    
    磁表面存储器，存取速度快，容量大。 由盘片、驱动器、控制器和接口组成。
    * 盘片：存储信息

    * 驱动器：驱动磁头沿盘面做径向运动以寻找目标磁道， **驱动器以额定速率稳定旋转并控制数据的读取和写入。** 

    * 控制器：接受主机发送来的命令，将它转换为磁盘驱动器控制命名， **实现主机于驱动器之间的数据格式转换机数据传送，控制驱动器读写操作** 

    * 接口：主机于慈磁盘存储器之间的连接部件
2. 硬盘

    常见硬盘有固态硬盘(SSD)、机械硬盘(HDD)、混合硬盘，SSD硬盘采用闪存颗粒存储数据，HDD采用磁性碟片存储，混合硬盘把磁性硬盘和闪存集成到一起。技术指标如下
    * 存储容量。 **硬盘能存储的二进制为信息的总量**。分为格式化容量和非格式化容量。
        * $非格式化容量=位密度\times 内圈磁道周长 \times 每个记录面的磁道数\times记录面数$
        * $格式化容量=每个扇区的字节数\times每道的扇区数\times每个记录面的磁道数\times记录面数$
    
    * 平均访问时间。从发出读写命令开始，到磁头移动到指定位置为止的时间。包括 **平均寻道时间和平均等待时间** 
        * 平均寻道时间：磁头移动到目标磁道(柱面)需要的时间；确定的时间，由驱动器决定
        * 平均等待时间：待读写的扇区旋转到磁头下的时间。一般选取磁道旋转一周时间的一半。
    * 数据传输率：$数据传输速率 = 每扇区的字节数 \times 每道扇区数 \times 磁盘的转速$
        * 外部传输速率
        * 内部传输速率：磁头找到数据的地址后，单位时间内写入或读出的字节数
3. 光存储器：采用聚焦激光束在盘式介质上非接触的记录高密度信息的存储器
    *  **光存储器的类型** ：只读光盘(CD-ROM)、只写一次型光盘(WORM)、可擦除型光盘
        * 只读光盘(CD-ROM)：生产厂商写入数据，用户不能修改
        * 只写一次型光盘(WROM): 由用户一次性写入，写入后不能擦除。光引起永久性变化
        * 可擦除光盘: 光介质的可逆性的物理变化
    * **光存储器的组成与特点**：光学、电学和机械部件组成
        * 记录密度大
        * 存储量大
        * 非接触式读写
        * 信息可以长时间保存
        * 成本低、对机械精度要求低、存取时间长
    * 与磁盘存储器比较
        * 光盘耐用性高
        * 光盘可靠性高，对环境要求低、机械震动问题少
        * 光盘密度是磁盘密度的10~100倍、读取速度比磁盘慢

4. USB移动硬盘和USB闪存盘

USB移动硬盘容量大、支持热拔插，可以像使用本地磁盘一样存取文件。传输速度与采用USB协议相关

USB闪存，使用闪存作为存储介质，采用USB接口标准。容量大、速度快、体积小、寿命长。而且容量在不断的增加，价格在不断的下降。


### 1.3.6 云存储
云存储是在云计算的概念上延申发展起来的，通过集群应用、网络技术或分布式文件系统等功能，将网络中大量各种不同类型的存储设备通过应用软件集合起来协同工作，共同对外提供数据存储和业务访功能的一个系统。 **云存储是是以数据存储和管理为核心的云计算系统** 

## 1.4 输入输出技术
输入/输出(Input/Output, I/O)系统是计算机与外界进行数据交换的通道。由于I/O设备种类越来越多，它们的控制方式不同，需要一个I/O系统来负责协调和控制CPU、存储器和各种外部设备之间的数据交互。

### 1.4.1 接口的功能和分类
**接口**，广义上讲，接口是指两个独立子系统之间相连接的部分，也常称为界面。由于主机与I/O设备之间的独立性，它们无法直接连接在一起，需要一个转换机构。用于连接主机与I/O设备的这个转换机构就是I/O接口电路，简称I/O接口。如图所示，
![](https://images.gitee.com/uploads/images/2021/0110/190508_f8d01678_7841459.png "屏幕截图.png")

**I/O接口除了连接主机与I/O设备外还有如下功能** 
1. 地址译码功能。给I/O设备分配不同的地址码，用于区别和选择I/O设备。
2. 主机与I/O设备间交换数据、控制命令及状态信息等。
3. 支持主机采用程序查询、中断和DMA等访问方式
4. 提供主机和I/O设备间需要的缓冲、暂存和驱动能力，满足一定的负载要求和时序要求。
5. 进行数据的类型、格式等方面的转换

**分类**
1. 按数据传送方式分为： **串行接口和并行接口**
    * 并行接口：并行传输数据， **一次把一字节的所有位同时输入或输出** (同时传输若干位)；主机与I/O设备，接口与I/O设备之间均采用并行方式传输数据
        * 适用于距离近，速度要求高的场合
    * 串行接口：串行传输数据，数据的所有位按顺序逐位输入或输出。接口与I/O设备之间采用串行传输方式，接口与主机之间采用并行传输方式
        * 传输距离远，速度要求低

2. 按主机访问I/O设备的控制方式分为：**程序查询接口、中断接口、DMA接口**以及更复杂的通道控制器、I/O处理机制等

3. 按时序控制方式分为：**同步接口和异步接口**

完整的I/O接口不但包括硬件电路，也可能你包括相关的软件驱动程序。这些软件模块由的放在接口的ROM中；有的放在主机系统的ROM中；也有的存储在外存中，需要执行时载入内存。

### 1.4.2 主机与外设间连接方式

常见的连接模式有**总线模式、星型、通道方式和I/O处理机方式**；总线方式是互联的基本方式，也是其他连接模式的基础。

总线是一组为各个部件 **分时共享信息** 的传送线，用于连接多个部件并为之提供信号交换的通路。
* 共享：连接到总线上的设备都可以使用总线传输信息(利用分时实现)
* 分时：某一时刻只允许一个部件将数据发送到总线上

总线不仅仅只是一组信号线，还包括相关协议。实现分时共享必须定制相应的规则，称为总线协议。总线协议包括信号线定义、数据格式、时序关系、信号电平和控制逻辑等。

### 1.4.3 I/O接口的编址方式
常见的方式有两种。一是、与内存单元统一编址；二是、I/O接口单独编址

*  **与内存单元统一编址**。将I/O设备接口中有关的寄存器或存储部件视为内存单元，与主存的存储单元统一编址。 **对I/O接口的访问和主存单元的访问一致**。 
    * 优点：用于内存的指令原则上可以用于接口，不用再为接口单独设置I/O操作指令
    * 缺点：地址空间被分成了两部分，其中一部分给接口使用，一部分给内存使用，会**导致内存地址不连续**。由于内存操作和接口操作指令不区分，读程序是就需要根据参数定义表仔细辨认，才能区分指令是操作内存还是操作接口

*  **I/O接口单独编址**。 设置单独的I/O接口地址空间，为接口中的有关寄存器或存储部件分配地址码，需要设置专门的I/O指令进行访问。
    * 优点：不占用内存的地址空间；访问主存的指令与访问接口的指令不同，区分方便

### 1.4.4 CPU与外设之间交换数据的方式

* **直接程序控制** ：CPU直接通过I/O指令对I/O接口进行访问，整个输入/输出过程由CPU执行程序完成。具体实现分为: **立即程序传送方式和程序查询方式**
    * 立即程序传送方式：CPU无须查看接口状态，就执行输入/输出指令进行数据传送，（无条件传送或同步传送）
    * 程序查询方式：CPU需要执行程序查询外设的状态，判断外设是否准备号数据接收或向CPU输入数据；特点：简单易实现；缺点：降低CPU的利用率，大量时间消耗再查询外设状态上，无法对突发事件做出实时响应

* **中断方式** ：中断是指CPU暂停执行正在执行的程序，转而去处理另外一个程序；当处理完成之后回到原先中断的程序继续执行。
    * **引起中断的事件称为中断源**。CPU内部事件引起的中断称为内部中断源；CPU外部事件引起中断称为外部中断源
    * **中断方式下的数据传输**。I/O接口再要进行数据收发时向CPU发送中断信息，待CPU确认后保存正在执行的程序，转而执行提前设置号的I/O中断服务程序，完成数据传输处理。
        * CPU不需要查询外设状态
        * 等待数据时执行其他程序
    * 中断方式无法满足高速的批量数据传送任务

* **直接存储器存储方式(DMA)**: 通过硬件控制实现主存与I/O设备间的直接数据传输，该过程由DMA控制器(DMAC)控制，不需要CPU干预。
    * 简化了CPU对数据传送的控制
    * 提高主机与外设并行工作程度
    * 实现了快速外设和主存之间的数据传送，提高系统效率
    * DMAC只提供了控制数据传送操作，外设的管理和某些控制任需要CPU承担

* **通道控制方式**: 执行通道程序进行I/O操作管理，为主机与I/O设备之间提供一种数据传送通道。当需要I/O操作时，CPU只需要按约定格式准备好命令和数据，启动通道执行相应的通道程序完成操作。
    * 通道程序可以完成复制的I/O管理和预处理
    * 解放了CPU对I/O管理的工作，提高系统效率