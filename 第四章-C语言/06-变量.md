# 变量

## 一、变量介绍

### 1.1 变量名的命名规则

变量名是由字母、数字、下划线组成，不能由数字开头，也不能和C语言关键字重复。

### 1.2 变量的作用
在程序运行时，变量占据存储空间的大小由数据类型决定，而不是由变量值决定。

### 1.3 变量的定义
**语法规则**:
`存储类型` `数据类型` `变量名` `[= 表达式]`

1. 存储类型<类型限定>

|关键字|作用|
|:---:|:---:|
|`extern`|全局变量声明限定, 不建立建立存储空间, 全局变量其他文件可以访问|
|`const`|只读存储限定, 常用于定义常量|
|`register`|定义寄存器变量. 建议型的指令, 有空闲寄存器就放在寄存器中, 没有就放在内存中. 不能由`&`取地址|
|`auto`|默认存储类型, 只能在某个程序范围内使用; 超出范围内存就会被销毁。如果不赋值, 随机的赋值给变量|
|`static`|静态存储变量, 可以修饰函数体内的数据也可以修饰函数体外的数据; 默认为0, 程序运行过程中不销毁内存, 即内存地址不变. 修饰的全局变量时, 其他文件无法访问|


#### 1.3.1 auto存储类型变量
* 被`auto`修饰的变量只能在某个程序的范围内使用, 通常在函数体内或函数中的复合语句内。被`auto`修饰的变量不赋值时，默认是随机值。

* 当`auto`存储类型限定的变量离开使用位置时,会被销毁。

* 在函数体的某段内说明`auto`存储类型的变量可以省略`auto`关键字


#### 1.3.2 register存储类型变量

* 定义寄存器变量。即将变量放在CPU寄存器中, 加快程序的运行。
* 这是一个建议型指令。如果申请不到寄存器, 将变量放在一般内存中, 同`auto`一样。
* 放在寄存器的变量不存在地址, 不能使用`&`取地址
* 寄存器数量有限. 在某些情况下, 变量保存在寄存器中会降低程序执行效率. 被占用的寄存器不能用于其他开销或者变量使用次数不够多, 不足装入和存储变量所带来的开销。

#### 1.3.3 static存储类型变量
* 静态存储类型变量。既可以在函数体内使用也可以在函数体外使用
* `static`修饰的变量默认值为0

1. 在函数体内部的变量称为局部变量
  * 局部变量超出其作用范围则销毁存储空间

2. 在函数体外的变量称为全局变量
  * 不同的函数都可以访问全局变量
  * 其他文件也可以访问全局变量
  * 程序没有结束时, 全局变量就会一直存在。内存空间不会被销毁

**局部变量使用static修饰的特点**
* 在内存中以固定内存存放,不是以堆栈方式存放
* 只要程序没有结束，静态变量的内存就不会被释放。当再次调用该函数时, 不再重新定义，而是保留上次的值继续使用。

**全局变量使用static修饰的特点**
* 限制全局变量在当前文件使用, 即: 其他文件不能使用该全局变量

#### 1.3.4 extern存储类型变量

当变量在函数体外定义或声明, 其他所有文件中的函数或程序段都可以访问这个变量。

extern称为外部参照引用。使用extern修饰限定的变量是引用其他文件中函数体外部定义或声明的变量。


**使用方式**:
建立一个文件extern1.c
```c
int global_a = 1000;

```
建立另一个文件extern2.c
```c
#include <stdio.h>

extern int global_a;
int main(){

    printf("global_a = %d", global_a);
    return 0;
}
```

**编译执行结果**
![extern](./images/extern.png)


2. 数据类型

![数据类型的分类](./images/数据类型分类.png)


